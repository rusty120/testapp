version: 0.0.{build}

skip_non_tags: true

build:
    verbosity: minimal

platform:
  - x64

cache:
  - node_modules --> package.json
  - bower_components -> bower.json

install:
  - ps: Install-Product node 6 $env:PLATFORM
  - npm install bower -g
  - npm install npm -g
  - npm install
  - bower install

build_script:
  - node --version
  - node node_modules\ember-cli\bin\ember electron:package --platform win32

after_build:
  - cd electron-builds
  - 7z a dummy-win32-ia32.zip electron-builds\dummy-win32-ia32
  - 7z a dummy-win32-x64.zip electron-builds\dummy-win32-x64
  - cd ..
  - ps: ls electron-builds

artifacts:
  - path: 'electron-builds\*.zip'
    name: electron-package

test: off

deploy:
  provider: GitHub
  auth_token:
    secure: TsQP4N5Z+OfYF7ras7CNNyaTk69Tuy2cmAIZ8HNow66qmZ4VsWWhzoW2JKWnrwQuBlFpgVQUurzPFc0+oUBcI9SKDBMEtrjKFF4NuiXQmEdI4EWvIVutNQwuFuXdDPpEwEDhn4DM/TzmOE2ixqvEDqvfVh6nD0x8RB1rHXNu0o1Kf3sf58jgFkzK7W4+wyfe0mbwftTiVpSFmwA0TKZdEvolZbPp9zHM9f8dmGq/YHh+70SS0oNR8hHvBazQQa1KpZVkM4+MXyOEWmAH0RWS+76aG4IgMtdtXtroqlEe6o0GUx/jI2zONevcO47VJxUAThErTliQu6o1pMmJs+HAqYmZWHB/ihEMcfm8ILDLm2b7WAyLVr4zIjneAQtVUa9MGF72OFhJJz+/lcXxHg4ls8aFpsfewMv1hq4dpeW6eM1INt8Qrfjw4PmXlu5nwUfKQf0TkahXTk3LrFEMont/REDNwz/VrsFj3+ReWz/pYG+6QmqutoTgr4sLceO1LrVMSu/hv3peA52X1JuHc7WtU0+xc8ujvBrUgEQS5UGwmfVwzqbjXRJ5ZSM15dg0JvPYfNqoNxlxJs82iXSkISlq2dumBVBFy88R+zu6n0IJ7PdwQONhqnL54FYHTj7+o0pc1o7JkfhHRSyAJy2BapemM0Jxz8jfBIV4zy3+MLzVdG0=
  artifact: electron-package
